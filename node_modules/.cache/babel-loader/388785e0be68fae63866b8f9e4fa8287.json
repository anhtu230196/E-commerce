{"ast":null,"code":"import axios from \"axios\";\nimport { clearCart } from \"./cartAction\";\nimport { FETCH_ORDERS_FAIL, FETCH_ORDERS_START, FETCH_ORDERS_SUCCESS, PURCHASE_FAIL, PURCHASE_START, PURCHASE_SUCCESS } from \"./typeActions\";\n\nconst purchaseStart = () => {\n  return {\n    type: PURCHASE_START\n  };\n};\n\nconst purchaseSuccess = () => {\n  return {\n    type: PURCHASE_SUCCESS\n  };\n};\n\nconst purchaseFailed = () => {\n  return {\n    type: PURCHASE_FAIL\n  };\n};\n\nexport const purchase = (order, history) => {\n  return dispatch => {\n    dispatch(purchaseStart());\n    axios.post(\"https://react-my-burger-4a0ef-default-rtdb.firebaseio.com/orders.json\", order).then(res => {\n      history.push(\"/\");\n      dispatch(purchaseSuccess());\n      dispatch(clearCart());\n    }).catch(err => {\n      dispatch(purchaseFailed());\n      alert(\"Does something wrong!!!\");\n    });\n  };\n};\nexport const fetchOrder = () => dispatch => {\n  dispatch({\n    type: FETCH_ORDERS_START\n  });\n  axios.get(\"https://react-my-burger-4a0ef-default-rtdb.firebaseio.com/orders.json\").then(res => {\n    const fetchedOrders = [];\n\n    for (let key in res.data) {\n      fetchOrder.push({ ...res.data,\n        id: key\n      });\n    }\n\n    dispatch({\n      type: FETCH_ORDERS_SUCCESS,\n      payload: res.data\n    });\n  }).catch(err => {\n    dispatch({\n      type: FETCH_ORDERS_FAIL\n    });\n  });\n};","map":{"version":3,"sources":["C:/Users/Admin/Documents/Front-End/ReactJS/crwn-shopping-page/src/redux/actions/orderAction.js"],"names":["axios","clearCart","FETCH_ORDERS_FAIL","FETCH_ORDERS_START","FETCH_ORDERS_SUCCESS","PURCHASE_FAIL","PURCHASE_START","PURCHASE_SUCCESS","purchaseStart","type","purchaseSuccess","purchaseFailed","purchase","order","history","dispatch","post","then","res","push","catch","err","alert","fetchOrder","get","fetchedOrders","key","data","id","payload"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,SACEC,iBADF,EAEEC,kBAFF,EAGEC,oBAHF,EAIEC,aAJF,EAKEC,cALF,EAMEC,gBANF,QAOO,eAPP;;AASA,MAAMC,aAAa,GAAG,MAAM;AAC1B,SAAO;AACLC,IAAAA,IAAI,EAAEH;AADD,GAAP;AAGD,CAJD;;AAMA,MAAMI,eAAe,GAAG,MAAM;AAC5B,SAAO;AACLD,IAAAA,IAAI,EAAEF;AADD,GAAP;AAGD,CAJD;;AAMA,MAAMI,cAAc,GAAG,MAAM;AAC3B,SAAO;AACLF,IAAAA,IAAI,EAAEJ;AADD,GAAP;AAGD,CAJD;;AAMA,OAAO,MAAMO,QAAQ,GAAG,CAACC,KAAD,EAAQC,OAAR,KAAoB;AAC1C,SAAQC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAACP,aAAa,EAAd,CAAR;AACAR,IAAAA,KAAK,CACFgB,IADH,CAEI,uEAFJ,EAGIH,KAHJ,EAKGI,IALH,CAKSC,GAAD,IAAS;AACbJ,MAAAA,OAAO,CAACK,IAAR,CAAa,GAAb;AACAJ,MAAAA,QAAQ,CAACL,eAAe,EAAhB,CAAR;AACAK,MAAAA,QAAQ,CAACd,SAAS,EAAV,CAAR;AACD,KATH,EAUGmB,KAVH,CAUUC,GAAD,IAAS;AACdN,MAAAA,QAAQ,CAACJ,cAAc,EAAf,CAAR;AACAW,MAAAA,KAAK,CAAC,yBAAD,CAAL;AACD,KAbH;AAcD,GAhBD;AAiBD,CAlBM;AAoBP,OAAO,MAAMC,UAAU,GAAG,MAAOR,QAAD,IAAc;AAC5CA,EAAAA,QAAQ,CAAC;AAAEN,IAAAA,IAAI,EAAEN;AAAR,GAAD,CAAR;AACAH,EAAAA,KAAK,CACFwB,GADH,CAEI,uEAFJ,EAIGP,IAJH,CAISC,GAAD,IAAS;AACb,UAAMO,aAAa,GAAG,EAAtB;;AACA,SAAK,IAAIC,GAAT,IAAgBR,GAAG,CAACS,IAApB,EAA0B;AACxBJ,MAAAA,UAAU,CAACJ,IAAX,CAAgB,EAAE,GAAGD,GAAG,CAACS,IAAT;AAAeC,QAAAA,EAAE,EAAEF;AAAnB,OAAhB;AACD;;AACDX,IAAAA,QAAQ,CAAC;AAAEN,MAAAA,IAAI,EAAEL,oBAAR;AAA8ByB,MAAAA,OAAO,EAAEX,GAAG,CAACS;AAA3C,KAAD,CAAR;AACD,GAVH,EAWGP,KAXH,CAWUC,GAAD,IAAS;AACdN,IAAAA,QAAQ,CAAC;AAAEN,MAAAA,IAAI,EAAEP;AAAR,KAAD,CAAR;AACD,GAbH;AAcD,CAhBM","sourcesContent":["import axios from \"axios\";\r\nimport { clearCart } from \"./cartAction\";\r\nimport {\r\n  FETCH_ORDERS_FAIL,\r\n  FETCH_ORDERS_START,\r\n  FETCH_ORDERS_SUCCESS,\r\n  PURCHASE_FAIL,\r\n  PURCHASE_START,\r\n  PURCHASE_SUCCESS,\r\n} from \"./typeActions\";\r\n\r\nconst purchaseStart = () => {\r\n  return {\r\n    type: PURCHASE_START,\r\n  };\r\n};\r\n\r\nconst purchaseSuccess = () => {\r\n  return {\r\n    type: PURCHASE_SUCCESS,\r\n  };\r\n};\r\n\r\nconst purchaseFailed = () => {\r\n  return {\r\n    type: PURCHASE_FAIL,\r\n  };\r\n};\r\n\r\nexport const purchase = (order, history) => {\r\n  return (dispatch) => {\r\n    dispatch(purchaseStart());\r\n    axios\r\n      .post(\r\n        \"https://react-my-burger-4a0ef-default-rtdb.firebaseio.com/orders.json\",\r\n        order\r\n      )\r\n      .then((res) => {\r\n        history.push(\"/\");\r\n        dispatch(purchaseSuccess());\r\n        dispatch(clearCart());\r\n      })\r\n      .catch((err) => {\r\n        dispatch(purchaseFailed());\r\n        alert(\"Does something wrong!!!\");\r\n      });\r\n  };\r\n};\r\n\r\nexport const fetchOrder = () => (dispatch) => {\r\n  dispatch({ type: FETCH_ORDERS_START });\r\n  axios\r\n    .get(\r\n      \"https://react-my-burger-4a0ef-default-rtdb.firebaseio.com/orders.json\"\r\n    )\r\n    .then((res) => {\r\n      const fetchedOrders = [];\r\n      for (let key in res.data) {\r\n        fetchOrder.push({ ...res.data, id: key });\r\n      }\r\n      dispatch({ type: FETCH_ORDERS_SUCCESS, payload: res.data });\r\n    })\r\n    .catch((err) => {\r\n      dispatch({ type: FETCH_ORDERS_FAIL });\r\n    });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}